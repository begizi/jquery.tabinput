!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(t){"use strict";function n(n,i){this.$input=t(n),this.inputList=[],this.options=t.extend(!0,{},this.options,this.defaults,i),this.buildContainer(),this.processFormat(),this.buildInputList(),this.val(this.$input.val()),this.$input.hide().after(this.$container)}n.prototype={constructor:n,defaults:{format:"MM/DD/YYYY",seperator:"/",filter:!1,textAlign:"left",cursor:"text",placeholder:!0,charWidth:.6,widthUnit:"em",templates:{inputContainer:'<div class="tabinput"></div>',inputs:'<div class="tabinput-input" contenteditable="true" />',seperator:'<span class="tabinput-seperator"></span>'}},buildContainer:function(){var n=this;n.$container=t(n.options.templates.inputContainer),n.$container.addClass(n.$input.attr("class")),n.$container.css({cursor:n.options.cursor}),n.$container.on("click",function(i){var e=t(i.target);e.is("[contenteditable]")||n.$container.find("[contenteditable]:first").focus().selectAllContent()})},processFormat:function(){this.inputBlocks=this.options.format.split(this.options.seperator),this.numInputs=this.inputBlocks.length},buildInputList:function(){var t=this;this.inputList=this.inputBlocks.map(function(n,i){var e=t.buildInput(n.length,n);return t.$container.append(e),i!==t.numInputs-1&&t.$container.append(t.buildSeperator()),e})},buildInput:function(n,i){var e=this,o=t(this.options.templates.inputs);return o.css({minWidth:n*e.options.charWidth+e.options.widthUnit,cursor:e.options.cursor,textAlign:e.options.textAlign}),e.options.placeholder&&o.text(i),o.on("click",function(n){var i=t(n.target);i.focus().selectAllContent()}),o.on("focus",function(){t(this).selectAllContent()}),o.on("input",function(){return e.options.filter&&(this.textContent=this.textContent.replace(e.options.filter,""),o.selectEndContent()),0===this.textContent.length&&e.options.placeholder?(this.textContent=i,o.selectAllContent(),void 0):(this.textContent.length>n&&(this.textContent=this.textContent.substring(0,n)),this.textContent.length===n&&o.nextAll("[contenteditable]").first().focus().selectAllContent(),e.pushVal(),void 0)}),o},buildSeperator:function(){var n=t(this.options.templates.seperator);return n.text(this.options.seperator),n},val:function(t){if(void 0!==t&&""!==t){var n=t.split(this.options.seperator);return this.inputList.forEach(function(t,i){t.text(n[i])}),this.$input.val(t)}return this.$input.val()},pushVal:function(){var t=this.inputList.map(function(t){return t.text()});this.$input.val(t.join(this.options.seperator),!0)},destroy:function(){this.$container.remove(),this.$input.show(),this.$input.data("tabinput",null)}},t.fn.selectAllContent=function(){var t=this[0],n=function(){if(t&&window.getSelection){var n=window.getSelection(),i=document.createRange();i.selectNodeContents(t),n.removeAllRanges(),n.addRange(i)}};window.requestAnimationFrame?window.requestAnimationFrame(function(){n()}):setTimeout(function(){n()},0)},t.fn.selectEndContent=function(){var t=this[0];if(t&&t.childNodes.length>0&&window.getSelection){var n=window.getSelection(),i=document.createRange();i.setStart(t.childNodes[0],t.childNodes[0].length),i.collapse(!0),n.removeAllRanges(),n.addRange(i),t.focus()}},t.fn.tabinput=function(i,e,o){var s,r=this.each(function(){var r=t(this),a=r.data("tabinput"),u="object"==typeof i&&i;a||(a=new n(this,u),r.data("tabinput",a)),"string"==typeof i&&a[i]instanceof Function&&(s=a[i](e,o),"destroy"===i&&t(this).data("tabinput",!1))});return void 0!==s?s:r}});